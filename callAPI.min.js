function callAPI(e,r,n=null,t=null,o=null,l=null,a=null,s=null,i=!0){function u(e){var r=[];for(var n in e)r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.join("&")}function c(e){let r=document.createElement("a");return r.href=e,r.host&&r.host!=window.location.host}if("function"!=typeof displayAlert&&(displayAlert=((e,r,n)=>{console.error("Function displayAlert non-charger",e,r,n),alert(n)})),!LIST_METHOD.includes(e))throw"Methode inconnue. Methode authorisé : "+LIST_METHOD.toString();{let d=new XMLHttpRequest;xhrPool.push(d),d.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){var e=JSON.parse(this.responseText);c(r)?o?o(e):displayAlert("main","success","Appel Réussi"):"no"==e.error?o?o(e):displayAlert("main","success","Appel Réussi"):l?l(e):displayAlert("main","warning",e.error)}else a?a():displayAlert("main","danger","Erreur lors de l'appel de l'API");c(r)?l?l(e):displayAlert("main","warning",e.error):s&&s()}},d.open(e,r+(null!=n&&"GET"==e?"?"+(n instanceof FormData?new URLSearchParams(n).toString():u(n)):""),i),null!=t&&d.setRequestHeader("Authorization","Bearer "+t),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(null!=n&&"POST"==e?n instanceof FormData?new URLSearchParams(n).toString():u(n):"")}}function abortAllRequest(){xhrPool.forEach(e=>{e.abort()}),xhrPool.length=0}const urlAPIDistante="<TODO Set url>",LIST_METHOD=["GET","POST"],DEFAULT_REPONSE="Erreur lors de l'appel de l'API";var xhrPool=[];window.addEventListener("beforeunload",()=>{abortAllRequest(),document.querySelectorAll("div.alert").forEach(e=>{e.remove()})});