'use strict';Object.defineProperty(exports,'__esModule',{value:!0});const XMLHttpRequest=require('xmlhttprequest').XMLHttpRequest,xhrPool=[];function abortAllRequest(){xhrPool.forEach(e=>{e.abort();}),xhrPool.length=0;}function displayAlert(e,t,r,s=!0){const o={info:{className:'alert-info',icon:'bi-info-circle'},success:{className:'alert-success',icon:'bi-patch-check'},warning:{className:'alert-warning',icon:'bi-exclamation-triangle'},danger:{className:'alert-danger',icon:'bi-x-octagon'}};if('undefined'!=typeof document){if(null==document.querySelector(e))throw new Error('Element absence de la page');{document.querySelectorAll(e+' div.alert').forEach(e=>{s&&e.remove();});const n=document.createElement('div');n.classList.add('alert','alert-dismissible','fade','show',o[t].className),n.innerHTML='<i class="bi '+o[t].icon+'"></i> '+r+'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>',document.querySelector(e).prepend(n);}}else switch(t){case'info':console.log('%c'+r,'color: #0099ff; font-weight: bold;');break;case'success':console.log('%c'+r,'color: #00cc00; font-weight: bold;');break;case'warning':console.warn(r);break;case'danger':console.error(r);break;default:console.log(r);}}const DEFAULT_RESPONSE='Erreur lors de l\'appel de l\'API',LIST_METHOD=['GET','POST'];function callAPI(e,t,r=null,s=null,o=null,n=null,l=null,a=null,c=!0){if(!LIST_METHOD.includes(e))throw new Error('Méthode inconnue. Méthode autorisé : '+LIST_METHOD.toString());{const u=new XMLHttpRequest;xhrPool.push(u),u.onreadystatechange=function(){if(4===this.readyState){if(200===this.status)if(''!==this.responseText)if(-1!==this.responseText.indexOf('{')){const e=JSON.parse(this.responseText);e.error?'no'===e.error?o?o(e):displayAlert('main','success','Appel Réussi'):n?n(e):displayAlert('main','warning',e.error):o?o(e):displayAlert('main','warning','Appel Réussi mais mauvais format');}else l?l({error:'Réponse au mauvais format'}):displayAlert('main','danger','Réponse au mauvais format');else l?l({error:'Aucune réponse de la part du serveur malgré un code 200'}):displayAlert('main','danger','Aucune réponse de la part du serveur malgré un code 200');else l?l({error:'Status HTTP '+this.status}):displayAlert('main','danger','Status HTTP '+this.status);a&&a();}},u.open(e,t+(null!=r&&'GET'===e?'?'+(r instanceof FormData?new URLSearchParams(r).toString():i(r)):''),c),null!=s&&u.setRequestHeader('Authorization','Bearer '+s),u.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),u.send(null!=r&&'POST'===e?r instanceof FormData?new URLSearchParams(r).toString():i(r):'');}function i(e){const t=[];for(const r in e)t.push(encodeURIComponent(r)+'='+encodeURIComponent(e[r]));return t.join('&');}}function docId(e){return document.getElementById(e);}function docQ(e){return document.querySelector(e);}function docQAll(e){return document.querySelectorAll(e);}function docCrea(e){return document.createElement(e);}function loadBtn(e,t,r,s,o=null){if(null===e)throw new Error('Erreur Selector');s=['grow','border'].includes(s)?s:'border',o=null!=o?['sm','lg'].includes(o)?o:'sm':null,e.innerHTML=e.disabled?null==t?'OK':t:'<span class="spinner-'+s+(null!=o?' spinner-'+s+'-'+o:'')+'" role="status" aria-hidden="true"></span>'+(!0!==r?' '+(null==t?'Chargement...':t):''),e.disabled=!e.disabled;}class cookie{static set(e,t,r){let s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3);let o='expires='+s.toUTCString();return document.cookie=e+'='+t+';'+o+';path=/;SameSite=Strict',!0;}static get(e=null){let t=!1,r=document.cookie.split(';');return null!==e&&(r.forEach(r=>{(r={name:r.trim().split('=')[0],value:r.trim().split('=')[1]}).name===e&&(t=r.value);}),t);}static delete(e){if(!1!==this.get(e))return document.cookie=e+'=;path=/;SameSite=Strict;expires=Thu, 01 Jan 1970 00:00:01 GMT',!0;}}class search{static table(e,t,r='',s='LIKE'){if('string'==typeof e){const o=document.getElementById(e).querySelector('tbody').rows;for(const e of o)switch(s){case'LIKE':e.querySelectorAll('td')[t].innerHTML.includes(r)?e.classList.contains('mustBeMask')||e.classList.remove('d-none'):e.classList.add('d-none');break;case'EQUAL':e.querySelectorAll('td')[t].innerHTML===r?e.classList.contains('mustBeMask')||e.classList.remove('d-none'):e.classList.add('d-none');}}}static array(e,t,r='',s='LIKE'){let o=[];return'object'==typeof e&&e.length>0&&e.forEach(e=>{if(e[t])switch(s){case'LIKE':e[t].includes(r)&&o.push(e);break;case'EQUAL':e[t]===r&&o.push(e);}else o=[];}),o;}}class sort{static table(e,t){let r,s,o,n,l,a,c,i=0;for(t=document.getElementById(t),s=!0,l='asc';s;)if(s=!1,r=t.querySelector('tbody').rows,r.length){for(o=0;o<r.length-1;o++)if(n=!1,a=r[o].querySelectorAll('td')[e].innerHTML,c=r[o+1].querySelectorAll('td')[e].innerHTML,a=isNaN(a)?a.includes('%')||a.includes('€')?parseFloat(a.split(/( )|(&nbsp;)/)[0]):a:parseFloat(a),c=isNaN(c)?c.includes('%')||c.includes('€')?parseFloat(c.split(/( )|(&nbsp;)/)[0]):c:parseFloat(c),'asc'===l){if(a>c){n=!0;break;}}else if(a<c){n=!0;break;}n?(r[o].parentNode.insertBefore(r[o+1],r[o]),s=!0,i++):0===i&&'asc'===l&&(l='desc',s=!0);}}}exports.DEFAULT_RESPONSE=DEFAULT_RESPONSE,exports.LIST_METHOD=LIST_METHOD,exports.abortAllRequest=abortAllRequest,exports.callAPI=callAPI,exports.cookie=cookie,exports.displayAlert=displayAlert,exports.docCrea=docCrea,exports.docId=docId,exports.docQ=docQ,exports.docQAll=docQAll,exports.loadBtn=loadBtn,exports.search=search,exports.sort=sort,exports.xhrPool=xhrPool;