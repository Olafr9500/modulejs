"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,xhrPool=[];function abortAllRequest(){xhrPool.forEach(e=>{e.abort()}),xhrPool.length=0}function displayAlert(e,t,s,o=!0){const r={info:{className:"alert-info",icon:"bi-info-circle"},success:{className:"alert-success",icon:"bi-patch-check"},warning:{className:"alert-warning",icon:"bi-exclamation-triangle"},danger:{className:"alert-danger",icon:"bi-x-octagon"}};if("undefined"!=typeof document){if(null==document.querySelector(e))throw new Error("Element absence de la page");{document.querySelectorAll(e+" div.alert").forEach(e=>{o&&e.remove()});const n=document.createElement("div");n.classList.add("alert","alert-dismissible","fade","show",r[t].className),n.innerHTML='<i class="bi '+r[t].icon+'"></i> '+s+'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>',document.querySelector(e).prepend(n)}}else switch(t){case"info":console.log("%c"+s,"color: #0099ff; font-weight: bold;");break;case"success":console.log("%c"+s,"color: #00cc00; font-weight: bold;");break;case"warning":console.warn(s);break;case"danger":console.error(s);break;default:console.log(s)}}const DEFAULT_RESPONSE="Erreur lors de l'appel de l'API",LIST_METHOD=["GET","POST"];function callAPI(e,t,s=null,o=null,r=null,n=null,a=null,l=null,c=!0){if(!LIST_METHOD.includes(e))throw new Error("Méthode inconnue. Méthode autorisé : "+LIST_METHOD.toString());{const u=new XMLHttpRequest;xhrPool.push(u),u.onreadystatechange=function(){if(4===this.readyState){if(200===this.status)if(""!==this.responseText)if(-1!==this.responseText.indexOf("{")){const e=JSON.parse(this.responseText);e.error?"no"===e.error?r?r(e):displayAlert("main","success","Appel Réussi"):n?n(e):displayAlert("main","warning",e.error):r?r(e):displayAlert("main","warning","Appel Réussi mais mauvais format")}else a?a({error:"Réponse au mauvais format"}):displayAlert("main","danger","Réponse au mauvais format");else a?a({error:"Aucune réponse de la part du serveur malgré un code 200"}):displayAlert("main","danger","Aucune réponse de la part du serveur malgré un code 200");else a?a({error:"Status HTTP "+this.status}):displayAlert("main","danger","Status HTTP "+this.status);l&&l()}},u.open(e,t+(null!=s&&"GET"===e?"?"+(s instanceof FormData?new URLSearchParams(s).toString():i(s)):""),c),null!=o&&u.setRequestHeader("Authorization","Bearer "+o),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(null!=s&&"POST"===e?s instanceof FormData?new URLSearchParams(s).toString():i(s):"")}function i(e){const t=[];for(const s in e)t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t.join("&")}}function docId(e){return document.getElementById(e)}function docQ(e){return document.querySelector(e)}function docQAll(e){return document.querySelectorAll(e)}function docCrea(e){return document.createElement(e)}class cookie{static set(e,t,s){let o=new Date;o.setTime(o.getTime()+24*s*60*60*1e3);let r="expires="+o.toUTCString();return document.cookie=e+"="+t+";"+r+";path=/",!0}static get(e=null){let t=!1,s=document.cookie.split(";");return null!==e&&(s.forEach(s=>{(s={name:s.trim().split("=")[0],value:s.trim().split("=")[1]}).name===e&&(t=s.value)}),t)}static delete(e){if(!1!==this.get(e))return document.cookie=e+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT",!0}}class search{static table(e,t,s="",o="LIKE"){if("string"==typeof e){const r=document.getElementById(e).querySelector("tbody").rows;for(const e of r)switch(o){case"LIKE":e.querySelectorAll("td")[t].innerHTML.includes(s)?e.classList.contains("mustBeMask")||e.classList.remove("d-none"):e.classList.add("d-none");break;case"EQUAL":e.querySelectorAll("td")[t].innerHTML===s?e.classList.contains("mustBeMask")||e.classList.remove("d-none"):e.classList.add("d-none")}}}static array(e,t,s="",o="LIKE"){let r=[];return"object"==typeof e&&e.length>0&&e.forEach(e=>{if(e[t])switch(o){case"LIKE":e[t].includes(s)&&r.push(e);break;case"EQUAL":e[t]===s&&r.push(e)}else r=[]}),r}}class sort{static table(e,t){let s,o,r,n,a,l,c,i=0;for(t=document.getElementById(t),o=!0,a="asc";o;)if(o=!1,s=t.querySelector("tbody").rows,s.length){for(r=0;r<s.length-1;r++)if(n=!1,l=s[r].querySelectorAll("td")[e].innerHTML,c=s[r+1].querySelectorAll("td")[e].innerHTML,l=isNaN(l)?l.includes("%")||l.includes("€")?parseFloat(l.split(/( )|(&nbsp;)/)[0]):l:parseFloat(l),c=isNaN(c)?c.includes("%")||c.includes("€")?parseFloat(c.split(/( )|(&nbsp;)/)[0]):c:parseFloat(c),"asc"===a){if(l>c){n=!0;break}}else if(l<c){n=!0;break}n?(s[r].parentNode.insertBefore(s[r+1],s[r]),o=!0,i++):0===i&&"asc"===a&&(a="desc",o=!0)}}}exports.DEFAULT_RESPONSE=DEFAULT_RESPONSE,exports.LIST_METHOD=LIST_METHOD,exports.abortAllRequest=abortAllRequest,exports.callAPI=callAPI,exports.cookie=cookie,exports.displayAlert=displayAlert,exports.docCrea=docCrea,exports.docId=docId,exports.docQ=docQ,exports.docQAll=docQAll,exports.search=search,exports.sort=sort,exports.xhrPool=xhrPool;